<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Handson Test</title>
    <script src="assets/js/jquery.min.js"></script>
    <style type="text/css">
        body{
            margin: 0;
        }
    </style>
    <link rel="stylesheet" href="assets/css/handsontable.full.css">
    <script src="assets/js/handsontable.full.js"></script>
</head>
<body>
<div class="checklist">
    <label><input type="checkbox" id="rowHeaders" checked="checked" autocomplete="off"> Show row headers</label>
    <label><input type="checkbox" id="colHeaders" checked="checked" autocomplete="off"> Show col headers</label>
</div>
<div id="testing"></div>
<script>
    Handsontable.Dom.addEvent(rowHeaders, 'click', function () {
        hot.updateSettings({
            rowHeaders: this.checked
        });
    });
    Handsontable.Dom.addEvent(colHeaders, 'click', function () {
        hot.updateSettings({
            colHeaders: this.checked
        });
    });
    var first = true;
    $("#testing").handsontable({
        colHeaders: ['ID', 'STYLE NUMBER', 'PO NUMBER', 'USER', 'DATE', 'COMPLETED'],
        rowHeaders: true,
        contextMenu: true,
        onChange: function (change) {
            if (first) {
                first = false;
                return; //don't save this change
            }
            $.ajax({ //saves changes from Handsontable
                url: "save.php",
                dataType: "json",
                type: "POST",
                data: {"data": $("#testing").handsontable('getData')}, //returns full array of grid data
                //data: change, //contains only information about changed cells
                success: function (data) {
                    console.log("saved", data);
                },
                error: function (data) {
                    console.log("error", data);
                }
            });
        }
    });

    $.ajax({ //loads data to Handsontable
        url: 'assets/data/test.json',
        dataType: 'json',
        type: 'GET',
        success: function(res){
            $("#testing").handsontable("loadData", res.data);
        }
    });
</script>
</body>
</html>